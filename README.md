
# å…¨åŸŸæ•°æ®å¹³å° (All Domain Data Platform)

ä¼ä¸šçº§æ•°æ®å¹³å°ï¼Œæä¾›æ•°æ®æ¥å…¥ã€ç®¡ç†ã€å…ƒæ•°æ®æ²»ç†å’Œæ•°æ®ä¼ è¾“çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

## ğŸ“‹ ç›®å½•

- [æ¶æ„æ¦‚è¿°](#æ¶æ„æ¦‚è¿°)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æœåŠ¡æ¨¡å—](#æœåŠ¡æ¨¡å—)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

ADDP é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ¯ä¸ªæ¨¡å—ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œæ‰©å±•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å®¢æˆ·ç«¯                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Gateway    â”‚  API ç½‘å…³ (8000)
                  â”‚   (å¾…å®ç°)    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                â–¼                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ System  â”‚     â”‚ Manager  â”‚    â”‚   Meta   â”‚
   â”‚  8080   â”‚     â”‚   8081   â”‚    â”‚   8082   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Transfer â”‚  æ•°æ®ä¼ è¾“ (8083)
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                â–¼                â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚PostgreSQLâ”‚    â”‚  Redis   â”‚    â”‚  MinIO   â”‚
  â”‚   5432   â”‚    â”‚   6379   â”‚    â”‚  9000    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- Go 1.21+ (å¼€å‘æ¨¡å¼)
- Node.js 18+ (å‰ç«¯å¼€å‘)
- Make (å¯é€‰ï¼Œç”¨äºå¿«æ·å‘½ä»¤)

### ä¸€é”®å¯åŠ¨ï¼ˆä»… System æ¨¡å—ï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd addp

# 2. åˆå§‹åŒ–é…ç½®
make init

# 3. å¯åŠ¨æœåŠ¡
make up

# 4. æŸ¥çœ‹çŠ¶æ€
make status
```

è®¿é—®åœ°å€ï¼š
- **System åç«¯**: http://localhost:8080
- **System å‰ç«¯**: http://localhost:8090

### å¯åŠ¨å®Œæ•´å¹³å°

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬ Gateway, Manager, Meta, Transferï¼‰
make up-full

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
make status

# æŸ¥çœ‹æ—¥å¿—
make logs
```

## ğŸ“¦ æœåŠ¡æ¨¡å—

### 1. System æ¨¡å— âœ… å·²å®ç°
**ç«¯å£**: 8080 (åç«¯), 8090 (å‰ç«¯)

æ ¸å¿ƒç³»ç»Ÿèƒ½åŠ›ï¼Œæä¾›ï¼š
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ (JWT)
- å¤šç§Ÿæˆ·ç®¡ç†
- ç”¨æˆ·ç®¡ç† (CRUD)
- å®¡è®¡æ—¥å¿—è®°å½•
- èµ„æºé…ç½®ç®¡ç† (åŠ å¯†å­˜å‚¨)
- PostgreSQL æ•°æ®å­˜å‚¨ (system schema)

**æ–‡æ¡£**: [system/CLAUDE.md](system/CLAUDE.md)

### 2. Gateway æ¨¡å— ğŸš§ å¾…å®ç°
**ç«¯å£**: 8000

API ç½‘å…³æœåŠ¡ï¼š
- ç»Ÿä¸€å…¥å£å’Œè·¯ç”±
- è¯·æ±‚è½¬å‘å’Œè´Ÿè½½å‡è¡¡
- è®¤è¯ä¼ é€’
- é™æµå’Œç†”æ–­

**æ–‡æ¡£**: [gateway/README.md](gateway/README.md)

### 3. Manager æ¨¡å— ğŸš§ å¾…å®ç°
**ç«¯å£**: 8081 (åç«¯), 8091 (å‰ç«¯)

æ•°æ®ç®¡ç†æœåŠ¡ï¼š
- æ•°æ®æºç®¡ç† (MySQL, PostgreSQL, S3, HDFS ç­‰)
- æ–‡ä»¶ä¸Šä¼ å’Œç›®å½•ç»„ç»‡
- å¤šæ ¼å¼æ•°æ®é¢„è§ˆ (CSV, JSON, Parquet ç­‰)
- æƒé™æ§åˆ¶

**æ–‡æ¡£**: [manager/README.md](manager/README.md)

### 4. Meta æ¨¡å— ğŸš§ å¾…å®ç°
**ç«¯å£**: 8082 (åç«¯), 8092 (å‰ç«¯)

å…ƒæ•°æ®ç®¡ç†æœåŠ¡ï¼š
- å…ƒæ•°æ®è‡ªåŠ¨è§£æ
- å…ƒæ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢
- æ•°æ®è¡€ç¼˜è¿½è¸ª
- å…ƒæ•°æ®æ£€ç´¢
- å¯æ‰©å±•çš„ç±»å‹æ’ä»¶

**æ–‡æ¡£**: [meta/README.md](meta/README.md)

### 5. Transfer æ¨¡å— ğŸš§ å¾…å®ç°
**ç«¯å£**: 8083 (åç«¯), 8093 (å‰ç«¯)

æ•°æ®ä¼ è¾“æœåŠ¡ï¼š
- æ•°æ®å¯¼å…¥/å¯¼å‡º
- æ•°æ®åŒæ­¥
- ä»»åŠ¡è°ƒåº¦ (Cron)
- æ•°æ®è½¬æ¢
- æ–­ç‚¹ç»­ä¼ 

**æ–‡æ¡£**: [transfer/README.md](transfer/README.md)

## ğŸ’» æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**: Go 1.21+
- **æ¡†æ¶**: Gin (HTTP), GORM (ORM)
- **æ•°æ®åº“**: PostgreSQL 15, SQLite (System), Redis
- **å­˜å‚¨**: MinIO / S3
- **ä»»åŠ¡é˜Ÿåˆ—**: Asynq (åŸºäº Redis)

### å‰ç«¯
- **æ¡†æ¶**: Vue 3 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **UI æ¡†æ¶**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**: Docker, Docker Compose
- **åå‘ä»£ç†**: Nginx (ç”Ÿäº§ç¯å¢ƒ)

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å¼€å‘ System æ¨¡å—

```bash
# åç«¯å¼€å‘
cd system/backend
go run cmd/server/main.go

# å‰ç«¯å¼€å‘
cd system/frontend
npm install
npm run dev
```

### å¼€å‘å…¶ä»–æ¨¡å—

```bash
# Manager æ¨¡å—
make dev-manager

# Meta æ¨¡å—
make dev-meta

# Transfer æ¨¡å—
make dev-transfer

# Gateway æ¨¡å—
make dev-gateway
```

### å¸¸ç”¨å‘½ä»¤

```bash
make help            # æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤
make build           # ç¼–è¯‘æ‰€æœ‰æœåŠ¡
make test            # è¿è¡Œæµ‹è¯•
make logs            # æŸ¥çœ‹æ—¥å¿—
make status          # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
make clean           # æ¸…ç†ç¼–è¯‘äº§ç‰©
make db-shell        # è¿æ¥æ•°æ®åº“
make redis-cli       # è¿æ¥ Redis
```

### ä»£ç è§„èŒƒ

```bash
make fmt             # æ ¼å¼åŒ–ä»£ç 
make lint            # ä»£ç æ£€æŸ¥
```

## ğŸš¢ éƒ¨ç½²è¯´æ˜

### Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
cp .env.example .env
# ç¼–è¾‘ .envï¼Œä¿®æ”¹å¯†ç å’Œå¯†é’¥

# å¯åŠ¨æœåŠ¡
make up              # ä»… System æ¨¡å—
make up-full         # å®Œæ•´å¹³å°

# åœæ­¢æœåŠ¡
make down
```

### ç‹¬ç«‹æœåŠ¡éƒ¨ç½²

æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ï¼š

```bash
# è¿›å…¥æ¨¡å—ç›®å½•
cd manager

# ç‹¬ç«‹éƒ¨ç½²
docker-compose up -d
```

### éå®¹å™¨åŒ–éƒ¨ç½²

```bash
# ç¼–è¯‘
make build

# è¿è¡Œ
./bin/system        # System æ¨¡å—
./bin/manager       # Manager æ¨¡å—
./bin/meta          # Meta æ¨¡å—
./bin/transfer      # Transfer æ¨¡å—
./bin/gateway       # Gateway æ¨¡å—
```

## ğŸ“¡ API æ–‡æ¡£

### System æ¨¡å— API

**è®¤è¯**
```bash
POST /api/auth/register    # æ³¨å†Œ
POST /api/auth/login       # ç™»å½•
```

**ç”¨æˆ·ç®¡ç†** (éœ€è®¤è¯)
```bash
GET    /api/users          # ç”¨æˆ·åˆ—è¡¨
GET    /api/users/:id      # ç”¨æˆ·è¯¦æƒ…
PUT    /api/users/:id      # æ›´æ–°ç”¨æˆ·
DELETE /api/users/:id      # åˆ é™¤ç”¨æˆ·
```

**æ—¥å¿—ç®¡ç†** (éœ€è®¤è¯)
```bash
GET    /api/logs           # æ—¥å¿—åˆ—è¡¨
GET    /api/logs/:id       # æ—¥å¿—è¯¦æƒ…
```

**èµ„æºç®¡ç†** (éœ€è®¤è¯)
```bash
GET    /api/resources      # èµ„æºåˆ—è¡¨
POST   /api/resources      # åˆ›å»ºèµ„æº
PUT    /api/resources/:id  # æ›´æ–°èµ„æº
DELETE /api/resources/:id  # åˆ é™¤èµ„æº
```

è¯¦ç»† API æ–‡æ¡£è§å„æ¨¡å— READMEã€‚

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

ä¸»è¦é…ç½®é¡¹åœ¨ `.env` æ–‡ä»¶ä¸­ï¼š

```bash
# JWT å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
JWT_SECRET=your-secret-key

# æ•°æ®åº“
POSTGRES_PASSWORD=your-db-password

# Redis
REDIS_PASSWORD=your-redis-password

# MinIO
MINIO_ROOT_PASSWORD=your-minio-password
```

### ç«¯å£åˆ†é…

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Gateway | 8000 | API ç½‘å…³ |
| System Backend | 8080 | System API |
| System Frontend | 8090 | System UI |
| Manager Backend | 8081 | Manager API |
| Manager Frontend | 8091 | Manager UI |
| Meta Backend | 8082 | Meta API |
| Meta Frontend | 8092 | Meta UI |
| Transfer Backend | 8083 | Transfer API |
| Transfer Frontend | 8093 | Transfer UI |
| PostgreSQL | 5432 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜/é˜Ÿåˆ— |
| MinIO API | 9000 | å¯¹è±¡å­˜å‚¨ |
| MinIO Console | 9001 | MinIO ç®¡ç†ç•Œé¢ |

## ğŸ—„ï¸ æ•°æ®åº“

### Schema ç»„ç»‡

PostgreSQL ä½¿ç”¨ schema éš”ç¦»å„æ¨¡å—æ•°æ®ï¼š
- `manager` - Manager æ¨¡å—æ•°æ®è¡¨
- `metadata` - Meta æ¨¡å—æ•°æ®è¡¨
- `transfer` - Transfer æ¨¡å—æ•°æ®è¡¨

System æ¨¡å—ä½¿ç”¨ç‹¬ç«‹çš„ SQLite æ•°æ®åº“ã€‚

### æ•°æ®åº“æ“ä½œ

```bash
# è¿æ¥æ•°æ®åº“
make db-shell

# è¿è¡Œè¿ç§»
make db-migrate

# å¤‡ä»½æ•°æ®åº“
make backup

# æ¢å¤æ•°æ®åº“
make restore FILE=backups/xxx.sql
```

## ğŸ“Š ç›‘æ§å’Œå¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
make health

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
make status

# æŸ¥çœ‹æ—¥å¿—
make logs
make logs-system
make logs-manager
```

## ğŸ¤ å¼€å‘è§„èŒƒ

### æ·»åŠ æ–° API

1. åœ¨ `internal/models/` å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `internal/repository/` å®ç°æ•°æ®è®¿é—®
3. åœ¨ `internal/service/` å®ç°ä¸šåŠ¡é€»è¾‘
4. åœ¨ `internal/api/` åˆ›å»º HTTP å¤„ç†å™¨
5. åœ¨ `internal/api/router.go` æ³¨å†Œè·¯ç”±

### æ¨¡å—é—´é€šä¿¡

ä½¿ç”¨ HTTP REST API è¿›è¡ŒæœåŠ¡é—´è°ƒç”¨ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æœåŠ¡åœ°å€ï¼š

```go
systemClient := &SystemClient{
    BaseURL: os.Getenv("SYSTEM_SERVICE_URL"),
}
```

## ğŸ“– æ›´å¤šæ–‡æ¡£

- [é¡¹ç›®æ¶æ„è¯´æ˜](CLAUDE.md)
- [System æ¨¡å—æ–‡æ¡£](system/CLAUDE.md)
- [Manager æ¨¡å—æ–‡æ¡£](manager/README.md)
- [Meta æ¨¡å—æ–‡æ¡£](meta/README.md)
- [Transfer æ¨¡å—æ–‡æ¡£](transfer/README.md)
- [Gateway æ¨¡å—æ–‡æ¡£](gateway/README.md)

## ğŸ› æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹æ—¥å¿—
make logs

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080
lsof -i :5432

# æ¸…ç†å¹¶é‡å¯
make clean-all
make up
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ PostgreSQL çŠ¶æ€
docker-compose ps postgres

# æŸ¥çœ‹ PostgreSQL æ—¥å¿—
docker-compose logs postgres

# é‡å¯æ•°æ®åº“
docker-compose restart postgres
```

### MinIO æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ MinIO çŠ¶æ€
docker-compose ps minio

# åˆå§‹åŒ– MinIO
make minio-setup
```

## ğŸ“ è®¸å¯è¯

[æ·»åŠ è®¸å¯è¯ä¿¡æ¯]

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·é˜…è¯»è´¡çŒ®æŒ‡å—ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

[æ·»åŠ è”ç³»æ–¹å¼]